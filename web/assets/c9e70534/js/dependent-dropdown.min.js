/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013 - 2015
 * @version 1.4.3
 *
 * A multi level dependent dropdown JQuery plugin. The plugin
 * allows nested and combined dependencies.
 * 
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";var t=function(t,a){return null===t||void 0===t||0===t.length||a&&""===e.trim(t)},a=function(t,a,n,d,o){var r={value:a,text:n};o=o||{},r=e.extend(r,o),null!==d&&a.toString()===d.toString()&&(r.selected="selected"),e("<option/>",r).appendTo(t)},n=function(e,t){var a,n,d,o={};if(0===e.length)return{};for(a=0;a<e.length;a++)n=e[a],d=t[a],o[n]=d;return o},d=function(t,a){var n=this;n.$element=e(t),e.each(a,function(e,t){n[e]=t}),n.initData(),n.init()};d.prototype={constructor:d,initData:function(){var e=this,t=e.$element;t.data("url",e.url).data("depends",e.depends).data("placeholder",e.placeholder).data("loading",e.loading).data("loadingClass",e.loadingClass).data("loadingText",e.loadingText).data("emptyMsg",e.emptyMsg).data("initialize",e.initialize).data("params",e.params)},init:function(){var a,n=this,d=n.depends,o=n.$element,r=d.length,i=o.find("option").length,l=n.initDepends||n.depends;(0===i||o.find('option[value=""]').length===i)&&o.attr("disabled","disabled");for(var p=0;r>p;p++)a=e("#"+d[p]),a.on("depdrop.change change select2:select krajeeselect2:cleared",function(e){(t(a.data("select2"))||"change"!==e.type)&&n.setDep(a,d,r,o.val())});if(n.initialize===!0)for(var p=0;p<l.length;p++)e("#"+l[p]).trigger("depdrop.change");o.trigger("depdrop.init")},setDep:function(t,a,n,d){for(var o,r,i=this,l=i.$element,p={},s=d,c=0;n>c;c++)o=e("#"+a[c]),r=o.attr("type"),p[c]="checkbox"===r||"radio"===r?o.prop("checked"):o.val();i.processDep(l,t.attr("id"),p,s,a)},processDep:function(d,o,r,i,l){var p,s,c,g,u,f=this,h=0,m={},v={depdrop_parents:r},y=n(l,r),b={},x=d.data("url"),C=d.data("placeholder"),D=d.data("loading"),T=d.data("loadingClass"),S=d.data("loadingText"),j=d.data("emptyMsg"),_=d.data("params");if(!t(_)){for(c=0;c<_.length;c++)g=_[c],u=e("#"+_[c]).val(),m[c]=u,b[g]=u;v={depdrop_parents:r,depdrop_params:m}}v.depdrop_all_params=e.extend(y,b),s={url:x,type:"post",data:v,dataType:"json",beforeSend:function(){d.trigger("depdrop.beforeChange",[o,e("#"+o).val(),i]),d.attr("disabled","disabled").html(""),D&&d.removeClass(T).addClass(T).html('<option id="">'+S+"</option>")},success:function(n){p=t(n.selected)?i===!1?null:i:n.selected,t(n)?a(d,"",j,""):(d.html(f.getSelect(n.output,C,p)),d.find("optgroup").length>0&&d.find('option[value=""]').attr("disabled","disabled"),n.output&&d.removeAttr("disabled")),h=d.find("option").length,d.find('option[value=""]').length>0&&(h-=1),d.trigger("depdrop.change",[o,e("#"+o).val(),h,i])},error:function(){d.trigger("depdrop.error",[o,e("#"+o).val(),i])},complete:function(){D&&d.removeClass(T),d.trigger("depdrop.afterChange",[o,e("#"+o).val(),i])}},e.ajax(s)},getSelect:function(n,d,o){var r,i=this,l=e("<select>"),p=i.idParam,s=i.nameParam;return d!==!1&&a(l,"",d,o),t(n)&&(n={}),e.each(n,function(t,n){if(n[p])r=n.options||{},a(l,n[p],n[s],o,r);else{var d=e("<optgroup>",{label:t});e.each(n,function(e,t){r=t.options||{},a(d,t[p],t[s],o)}),d.appendTo(l)}}),l.html()}},e.fn.depdrop=function(t){var a=Array.apply(null,arguments);return a.shift(),this.each(function(){var n=e(this),o=n.data("depdrop"),r="object"==typeof t&&t;o||(o=new d(this,e.extend({},e.fn.depdrop.defaults,r,e(this).data())),n.data("depdrop",o)),"string"==typeof t&&o[t].apply(o,a)})},e.fn.depdrop.defaults={url:"",loading:!0,loadingClass:"kv-loading",loadingText:"Loading ...",placeholder:"Select ...",emptyMsg:"No data found",initialize:!1,idParam:"id",nameParam:"name",params:{}},e.fn.depdrop.Constructor=d,e(function(){e("select.depdrop").depdrop()})}(window.jQuery);